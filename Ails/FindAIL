<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Find an AIL - Safe Freight Program</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background-color: #f8f9fa;
      color: #333;
      line-height: 1.6;
    }
    
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 2rem;
    }
    
    .header {
      text-align: center;
      margin-bottom: 3rem;
    }
    
    .header h1 {
      font-size: 2.5rem;
      color: #2d5a27;
      margin-bottom: 0.5rem;
    }
    
    .header p {
      font-size: 1.1rem;
      color: #666;
    }
    
    /* Search Controls */
    .search-section {
      background: white;
      border-radius: 12px;
      padding: 2rem;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      margin-bottom: 2rem;
    }
    
    .search-tabs {
      display: flex;
      gap: 1rem;
      margin-bottom: 2rem;
      border-bottom: 2px solid #e0e0e0;
    }
    
    .tab-button {
      padding: 1rem 2rem;
      background: none;
      border: none;
      font-size: 1.1rem;
      font-weight: 600;
      color: #666;
      cursor: pointer;
      border-bottom: 3px solid transparent;
      transition: all 0.3s ease;
    }
    
    .tab-button.active {
      color: #2d5a27;
      border-bottom-color: #2d5a27;
    }
    
    .search-form {
      display: grid;
      grid-template-columns: 1fr 1fr auto;
      gap: 1rem;
      align-items: end;
    }
    
    .form-group {
      display: flex;
      flex-direction: column;
    }
    
    .form-group label {
      font-weight: 600;
      margin-bottom: 0.5rem;
      color: #555;
    }
    
    .form-group input,
    .form-group select {
      padding: 0.75rem;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 1rem;
    }
    
    .search-btn {
      padding: 0.75rem 2rem;
      background: #2d5a27;
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    
    .search-btn:hover {
      background: #1e3f1c;
    }
    
    /* Results Section */
    .results-section {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2rem;
      min-height: 600px;
    }
    
    /* Search Results */
    .results-list {
      background: white;
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      overflow-y: auto;
      max-height: 700px;
    }
    
    .results-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid #e0e0e0;
    }
    
    .results-count {
      font-weight: 600;
      color: #2d5a27;
    }
    
    .sort-select {
      padding: 0.5rem;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 0.9rem;
    }
    
    .ail-card {
      background: #f8f9fa;
      border-radius: 8px;
      padding: 1.5rem;
      margin-bottom: 1rem;
      border-left: 4px solid #2d5a27;
      transition: all 0.3s ease;
      cursor: pointer;
    }
    
    .ail-card:hover {
      background: #e8f4f8;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    
    .ail-header {
      display: flex;
      justify-content: between;
      align-items: flex-start;
      margin-bottom: 0.5rem;
    }
    
    .ail-name {
      font-size: 1.1rem;
      font-weight: 600;
      color: #2d5a27;
      margin-bottom: 0.25rem;
    }
    
    .ail-number {
      background: #2d5a27;
      color: white;
      padding: 0.25rem 0.75rem;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 600;
      margin-left: auto;
    }
    
    .ail-location {
      font-weight: 600;
      color: #666;
      margin-bottom: 0.5rem;
    }
    
    .ail-address {
      color: #777;
      font-size: 0.9rem;
      margin-bottom: 0.5rem;
    }
    
    .ail-phone {
      color: #2d5a27;
      font-weight: 600;
      font-size: 0.9rem;
    }
    
    .distance {
      background: #e8f4f8;
      color: #2d5a27;
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
      font-size: 0.8rem;
      font-weight: 600;
      margin-top: 0.5rem;
      display: inline-block;
    }
    
    /* Map Section */
    .map-container {
      background: white;
      border-radius: 12px;
      padding: 1rem;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      position: relative;
    }
    
    #map {
      width: 100%;
      height: 650px;
      border-radius: 8px;
      background: #e8f4f8;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #666;
      font-size: 1.1rem;
    }
    
    /* Filter Panel */
    .filter-panel {
      background: white;
      border-radius: 8px;
      padding: 1rem;
      margin-bottom: 1rem;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }
    
    .filter-row {
      display: flex;
      gap: 1rem;
      align-items: center;
      flex-wrap: wrap;
    }
    
    .filter-group {
      display: flex;
      flex-direction: column;
      min-width: 150px;
    }
    
    .filter-group label {
      font-size: 0.9rem;
      font-weight: 600;
      margin-bottom: 0.25rem;
      color: #555;
    }
    
    .filter-group select,
    .filter-group input {
      padding: 0.5rem;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 0.9rem;
    }
    
    /* Mobile Responsive */
    @media (max-width: 1024px) {
      .results-section {
        grid-template-columns: 1fr;
      }
      
      .search-form {
        grid-template-columns: 1fr;
        gap: 1rem;
      }
      
      .tab-button {
        padding: 0.75rem 1rem;
        font-size: 1rem;
      }
    }
    
    @media (max-width: 768px) {
      .container {
        padding: 1rem;
      }
      
      .header h1 {
        font-size: 2rem;
      }
      
      .search-tabs {
        flex-direction: column;
        gap: 0.5rem;
      }
      
      .filter-row {
        flex-direction: column;
        align-items: stretch;
      }
      
      .ail-header {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .ail-number {
        margin-left: 0;
        margin-top: 0.5rem;
        align-self: flex-start;
      }
    }
    
    /* Loading States */
    .loading {
      text-align: center;
      padding: 3rem;
      color: #666;
    }
    
    .loading::after {
      content: "";
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 2px solid #ddd;
      border-top: 2px solid #2d5a27;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-left: 0.5rem;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>Find an Authorised Inspection Location (AIL)</h1>
      <p>Locate certified inspection facilities across Australia for your freight equipment</p>
    </div>

    <div class="search-section">
      <div class="search-tabs">
        <button class="tab-button active" onclick="switchTab('search')">üîç Search</button>
        <button class="tab-button" onclick="switchTab('map')">üó∫Ô∏è Map View</button>
      </div>

      <div id="searchTab">
        <div class="search-form">
          <div class="form-group">
            <label for="locationSearch">Location (State, City, or Suburb)</label>
            <input type="text" id="locationSearch" placeholder="e.g. Sydney, Melbourne, QLD" />
          </div>
          <div class="form-group">
            <label for="serviceType">Service Type</label>
            <select id="serviceType">
              <option value="">All Services</option>
              <option value="Fixed">Fixed Location</option>
              <option value="Mobile">Mobile Inspector</option>
            </select>
          </div>
          <button class="search-btn" onclick="searchAILs()">Search AILs</button>
        </div>
      </div>

      <div id="mapTab" style="display: none;">
        <div class="filter-panel">
          <div class="filter-row">
            <div class="filter-group">
              <label for="stateFilter">State</label>
              <select id="stateFilter" onchange="filterMap()">
                <option value="">All States</option>
                <option value="NSW">New South Wales</option>
                <option value="QLD">Queensland</option>
                <option value="VIC">Victoria</option>
                <option value="SA">South Australia</option>
                <option value="WA">Western Australia</option>
                <option value="NT">Northern Territory</option>
                <option value="TAS">Tasmania</option>
              </select>
            </div>
            <div class="filter-group">
              <label for="typeFilter">Type</label>
              <select id="typeFilter" onchange="filterMap()">
                <option value="">All Types</option>
                <option value="Fixed">Fixed Location</option>
                <option value="Mobile">Mobile Inspector</option>
              </select>
            </div>
            <div class="filter-group">
              <label for="radiusFilter">Search Radius</label>
              <select id="radiusFilter" onchange="filterMap()">
                <option value="50">50km</option>
                <option value="100" selected>100km</option>
                <option value="200">200km</option>
                <option value="500">500km</option>
                <option value="">No Limit</option>
              </select>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="results-section">
      <div class="results-list">
        <div class="results-header">
          <span class="results-count" id="resultsCount">Loading AIL locations...</span>
          <select class="sort-select" id="sortSelect" onchange="sortResults()">
            <option value="name">Sort by Name</option>
            <option value="location">Sort by Location</option>
            <option value="distance">Sort by Distance</option>
          </select>
        </div>
        <div id="ailsList" class="loading">Loading AIL data...</div>
      </div>

      <div class="map-container">
        <div id="map">
          Interactive Map Loading...
          <br><small>Map will show all AIL locations with hover details</small>
        </div>
      </div>
    </div>
  </div>

  <script>
    // AIL Data from the Google Sheet
    const ailData = [
      { company: "Aero Refuellers", ailNumber: "239", location: "Albury Wodonga", address: "Hanger 8-11 Ogden Street East Albury", phone: "02 6041 1599", state: "NSW", type: "Fixed" },
      { company: "Australian Fuelling Systems & Equip", ailNumber: "222", location: "Tamworth", address: "7-11 Armstrong Street", phone: "02 6760 7816", state: "NSW", type: "Fixed" },
      { company: "Doug Sutherland Truck Repairs", ailNumber: "220", location: "Wagga Wagga", address: "222 Urana Street", phone: "02 6925 2094", state: "NSW", type: "Fixed" },
      { company: "Durham Fabrications", ailNumber: "207", location: "Newcastle", address: "4 Ranton Street Cardiff", phone: "02 4956 8868", state: "NSW", type: "Fixed" },
      { company: "Durham Fabrications Mobile", ailNumber: "208", location: "Luke Howson", address: "Mobile Inspector", phone: "02 4956 8868", state: "NSW", type: "Mobile" },
      { company: "Engineering, Mining, Petroleum Pty Ltd", ailNumber: "241", location: "Tamworth", address: "1015 Armidale Road Nemingha", phone: "02 6760 9548", state: "NSW", type: "Fixed" },
      { company: "Express Engineering Australia Pty Ltd", ailNumber: "237", location: "Dubbo", address: "20R Yarrandale Road", phone: "02 6884 2723", state: "NSW", type: "Fixed" },
      { company: "Fuel Spec Services", ailNumber: "201", location: "Sydney", address: "13 Hume Road Smithfield NSW 2164", phone: "1300 113 541", state: "NSW", type: "Fixed" },
      { company: "Fuel Spec Services Mobile", ailNumber: "205", location: "Steve Hudson", address: "Mobile Inspector", phone: "1301 113 541", state: "NSW", type: "Mobile" },
      { company: "Hancock & Owen Services Pty Ltd", ailNumber: "221", location: "Newcastle", address: "38 Parker Street Carrington", phone: "02 4969 5390", state: "NSW", type: "Fixed" },
      { company: "Heavy Haulage Maintenance", ailNumber: "235", location: "Newcastle", address: "28 Old Punt Road Tomago", phone: "02 4964 9475", state: "NSW", type: "Fixed" },
      { company: "WBG Trailer Repairs", ailNumber: "200", location: "Sydney", address: "Lot 1 Yarrunga Road Prestons", phone: "02 9608 2288", state: "NSW", type: "Fixed" },
      
      { company: "Brown & Hurley", ailNumber: "410", location: "Mackay", address: "2 Central Park Drive South Mackay", phone: "07 4952 3722", state: "QLD", type: "Fixed" },
      { company: "Brown and Hurley", ailNumber: "462", location: "Toowoomba", address: "28-30 Carrington Road Torrington", phone: "07 4690 7300", state: "QLD", type: "Fixed" },
      { company: "Central Coast Services Mackay", ailNumber: "424", location: "Mackay", address: "Lot 1 Presto Avenue, Outer Harbour", phone: "07 4955 4922", state: "QLD", type: "Fixed" },
      { company: "CQ Diesel Fitting", ailNumber: "452", location: "Gladstone", address: "23 Bensted Road", phone: "07 4972 7401", state: "QLD", type: "Fixed" },
      { company: "CQ Diesel Fitting", ailNumber: "460", location: "Brisbane", address: "87 Links Avenue Eagle Farm", phone: "07 3268 2543", state: "QLD", type: "Fixed" },
      { company: "CQ Diesel Fitting", ailNumber: "461", location: "Mackay", address: "112 Spiller Avenue, Outer Harbour", phone: "07 4955 0324", state: "QLD", type: "Fixed" },
      { company: "Fuel Service Australia - Mobile", ailNumber: "415", location: "Kent Frantz", address: "29 Sandmere Road Pinkenba", phone: "0433 450 603", state: "QLD", type: "Mobile" },
      { company: "Haulmark Trailers (Australia)", ailNumber: "411", location: "Brisbane", address: "32 Suscatand Street Rocklea", phone: "07 3277 8844", state: "QLD", type: "Fixed" },
      { company: "Haulmark Trailers (Australia)", ailNumber: "412", location: "Townsville", address: "42 Kupfer Drive Roseneath", phone: "07 4144 2803", state: "QLD", type: "Fixed" },
      { company: "Holmwood Highgate (Aust) Pty Ltd", ailNumber: "405", location: "Brisbane", address: "20 Burchill Street Loganholme", phone: "07 3440 9000", state: "QLD", type: "Fixed" },
      { company: "Liquip Sales (QLD) Pty Ltd", ailNumber: "401", location: "Brisbane", address: "730 Macarthur Avenue Central Pinkenba", phone: "07 3633 9100", state: "QLD", type: "Fixed" },
      { company: "Liquip Sales NQ", ailNumber: "414", location: "Townsville", address: "659-665 Ingham Road Bohle", phone: "07 4774 8060", state: "QLD", type: "Fixed" },
      { company: "Northern Refuelling Maintenance Pty Ltd", ailNumber: "407", location: "Cairns", address: "3 Marsh Street Woree", phone: "07 4033 2199", state: "QLD", type: "Fixed" },
      { company: "NQ Fuel & Maintenance", ailNumber: "435", location: "Townsville", address: "485 Woolcock Street Garbutt", phone: "07 4774 3334", state: "QLD", type: "Fixed" },
      { company: "NQ Fuel & Maintenance - Mobile", ailNumber: "436", location: "Ray Lowth", address: "Mobile Inspector", phone: "07 4774 3334", state: "QLD", type: "Mobile" },
      { company: "NQ Petro Pty Ltd", ailNumber: "432", location: "Cairns", address: "14 Atticus Street Woree", phone: "07 4054 5100", state: "QLD", type: "Fixed" },
      { company: "Queensland Tanker Services", ailNumber: "408", location: "Townsville", address: "3-5 Vennard Street", phone: "0417 356 568", state: "QLD", type: "Fixed" },
      { company: "Queensland Tanker Services - Mobile", ailNumber: "409", location: "Andrew Bates", address: "Mobile Inspector", phone: "0417 356 568", state: "QLD", type: "Mobile" },
      { company: "RGM Maintenance Pty Ltd", ailNumber: "426", location: "Brisbane", address: "32 Ashover Road Rocklea", phone: "07 3277 7616", state: "QLD", type: "Fixed" },
      { company: "RGM Maintenance Pty Ltd", ailNumber: "427", location: "Townsville", address: "24 Curley Circuit Roseneath", phone: "07 4421 9100", state: "QLD", type: "Fixed" },
      { company: "RGM Maintenance Pty Ltd - Mobile", ailNumber: "418", location: "Rob Peace", address: "24 Curley Circuit Roseneath", phone: "07 4421 9100", state: "QLD", type: "Mobile" },
      { company: "RGM Maintenance Pty Ltd", ailNumber: "465", location: "Mackay", address: "500 Milton Street, Paget", phone: "0406 495 734", state: "QLD", type: "Fixed" },
      { company: "RGM Maintenance Pty Ltd - Mobile", ailNumber: "417", location: "Lachlan Drew", address: "500 Milton Street, Paget", phone: "0406 495 734", state: "QLD", type: "Mobile" },
      { company: "RGM Maintenance Pty Ltd", ailNumber: "470", location: "Brisbane", address: "351 Main Myrtletown Road Pinkenba", phone: "07 3260 1224", state: "QLD", type: "Fixed" },
      { company: "RGM Maintenance Pty Ltd", ailNumber: "471", location: "Cairns", address: "63-67 Aumuller Street Portsmouth", phone: "07 4080 7500", state: "QLD", type: "Fixed" },
      { company: "RGM Maintenance Pty Ltd", ailNumber: "472", location: "Rockhampton", address: "1033 Bruce Hwy Parkhurst", phone: "07 4923 1000", state: "QLD", type: "Fixed" },
      { company: "Stephen Symes - Mobile", ailNumber: "457", location: "Stephen Symes", address: "Mobile Inspector", phone: "0403 277 637", state: "QLD", type: "Mobile" },
      { company: "Sustar Engineering Pty Ltd", ailNumber: "416", location: "Gladstone", address: "Lot 244 Fison Street", phone: "07 4972 5366", state: "QLD", type: "Fixed" },
      
      { company: "Acme Oil Equipment Services Pty Ltd", ailNumber: "305", location: "Melbourne", address: "32 Greens Road Dandenong South", phone: "03 9791 3255", state: "VIC", type: "Fixed" },
      { company: "Australian Tank Engineering", ailNumber: "320", location: "Melbourne", address: "29 - 31 Vella Drive Sunshine", phone: "03 9310 2722", state: "VIC", type: "Fixed" },
      { company: "Echuca Engineering", ailNumber: "310", location: "Echuca", address: "13 Mundarra Road", phone: "03 5480 6921", state: "VIC", type: "Fixed" },
      { company: "Evolution Tanker Repairs", ailNumber: "304", location: "Koo Wee Rup", address: "371 Rossiter Road", phone: "0424 099 314", state: "VIC", type: "Fixed" },
      { company: "G & S Bigham", ailNumber: "313", location: "Horsham", address: "87 Golf Course Road", phone: "03 5382 5893", state: "VIC", type: "Fixed" },
      { company: "Holmwood Group VIC", ailNumber: "303", location: "Melbourne", address: "425 Fitzgerald Road Derrimut", phone: "03 9936 0360", state: "VIC", type: "Fixed" },
      { company: "Johnson's Truck & Coach Service Pty Ltd", ailNumber: "324", location: "Mildura", address: "579 Benetook Avenue", phone: "03 5024 4666", state: "VIC", type: "Fixed" },
      { company: "Liquip Victoria (Fuelcraft)", ailNumber: "322", location: "Melbourne", address: "476 Boundary Rd Derrimut", phone: "03 9311 7822", state: "VIC", type: "Fixed" },
      { company: "Marshall Lethlean", ailNumber: "302", location: "Melbourne", address: "20 Whitfield Blvd, Cranbourne West", phone: "03 8788 5400", state: "VIC", type: "Fixed" },
      { company: "Progress Transport Services Pty Ltd", ailNumber: "323", location: "Warrnambool", address: "Shed 2, Coghlans Road", phone: "0429 320 420", state: "VIC", type: "Fixed" },
      { company: "Starworx", ailNumber: "307", location: "Truganina", address: "5A Westwood Drive Ravenhall", phone: "0459 839 072", state: "VIC", type: "Fixed" },
      { company: "Tieman Tankers", ailNumber: "326", location: "Melbourne", address: "184-186 Northbourne Road Campbellfield", phone: "03 9469 6701", state: "VIC", type: "Fixed" },
      { company: "Transport Preventative Maintenance P/Ltd", ailNumber: "314", location: "Melbourne", address: "10-14 Churchill Street Williamstown", phone: "03 9397 1135", state: "VIC", type: "Fixed" },
      
      { company: "Haulmark Trailers Australia", ailNumber: "503", location: "Adelaide", address: "97-99 West Avenue Edinburgh", phone: "08 8283 8585", state: "SA", type: "Fixed" },
      { company: "Hoss Engineering & Maintenance Service", ailNumber: "506", location: "Port Lincoln", address: "3 Mallee Crescent", phone: "0427 518 945", state: "SA", type: "Fixed" },
      { company: "Liquip (SA) Pty Ltd", ailNumber: "502", location: "Adelaide", address: "10 Creswell Road Largs North", phone: "08 8341 7009", state: "SA", type: "Fixed" },
      { company: "Mechanical & Technical Testing", ailNumber: "512", location: "Naracoorte", address: "40 Butler Terrace", phone: "08 8762 2379", state: "SA", type: "Fixed" },
      { company: "OES Oil Engineering Services", ailNumber: "501", location: "Adelaide", address: "5 Creswell Road Largs North", phone: "08 8341 5677", state: "SA", type: "Fixed" },
      
      { company: "Fuel Maintenance and Engineering", ailNumber: "657", location: "Geraldton", address: "1562 Arthur Road", phone: "0409 981 026", state: "WA", type: "Fixed" },
      { company: "Integrated Fuel Services", ailNumber: "623", location: "JP Van Loenhout", address: "Mobile Inspector", phone: "08 9434 7000", state: "WA", type: "Mobile" },
      { company: "J & S Labour and Machinery", ailNumber: "665", location: "Port Headland", address: "40 Moorambine Street Wedgefield", phone: "08 9172 5313", state: "WA", type: "Fixed" },
      { company: "Kip & Steve's Mechanical Repairs", ailNumber: "645", location: "Esperance", address: "21 Currong Street", phone: "08 9071 2411", state: "WA", type: "Fixed" },
      { company: "Perth Tanker Repairs", ailNumber: "690", location: "Fremantle/Rockingham", address: "30-32 Macedonia St, Naval Base", phone: "08 9410 0222", state: "WA", type: "Fixed" },
      { company: "Perth Tanker Repairs Mobile", ailNumber: "651", location: "Steve Albertini", address: "Mobile Inspector", phone: "08 9410 0222", state: "WA", type: "Mobile" },
      { company: "Petroleum Technologies Australia", ailNumber: "606", location: "Kalgoorlie", address: "5 Kybo Street", phone: "08 9091 2321", state: "WA", type: "Fixed" },
      { company: "Road Tank Repairs & Services WA Mobile", ailNumber: "613", location: "Brad Onley", address: "Mobile Inspector", phone: "08 6166 3860", state: "WA", type: "Mobile" },
      { company: "Road Tank Repairs & Services WA", ailNumber: "691", location: "Bibra Lake", address: "11 Camomile Way", phone: "08 6166 3860", state: "WA", type: "Fixed" },
      { company: "Stevemacs - Bulk", ailNumber: "
